<?php /** @var $block Signifyd\Connect\Block\Adminhtml\CaseInfo */?>
<?php /** @var \Magento\Framework\Escaper $escaper */?>
<?php

if ($block->getCaseEntity()->isEmpty()) {
    return '';
}
?>
<section class="admin__page-section order-case-info">
    <div class="admin__page-section-title">
        <span class="title"><?= $escaper->escapeHtml(__('Signifyd Fraud Protection')) ?></span>
    </div>
    <div class="admin__page-section-content">
        <div class="admin__page-section-item case-information">
            <div class="admin__table-wrapper">
                <table class="admin__table-secondary order-case-table">
                    <tbody>
                    <tr>
                        <th class="col-guarantee-disposition" id="signifyd-decision">
                            <?= $escaper->escapeHtml(__('Signifyd Decision')) ?>
                        </th>
                        <td class="col-guarantee-disposition" id="signifyd-decision-value">
                            <?= $escaper->escapeHtml($block->getCaseGuaranteeDisposition()) ?>
                        </td>
                    </tr>
                    <tr>
                        <th class="col-guarantee-disposition" id="signifyd-score">
                            <?= $escaper->escapeHtml(__('Score')) ?>
                        </th>
                        <td class="col-guarantee-disposition" id="signifyd-score-value">
                            <?= $escaper->escapeHtml($block->getCaseScore()) ?>
                        </td>
                    </tr>
                    <?php $reason = $block->getCheckpointActionReason(); ?>
                    <?php if (empty($reason) === false): ?>
                    <tr>
                        <th class="col-guarantee-disposition" id="signifyd-reason">
                            <?= $escaper->escapeHtml(__('Action Reason')) ?>
                        </th>
                        <td class="col-guarantee-disposition" id="signifyd-reason-value">
                            <?= $escaper->escapeHtml($reason) ?>
                        </td>
                    </tr>
                    <?php endif; ?>
                    <tr>
                        <th class="col-guarantee-disposition" id="signifyd-logs">
                            <?= $escaper->escapeHtml(__('Order Logs')) ?>
                        </th>
                    <?php if ($block->hasLogsToDownload()): ?>
                        <td class="col-lgos" id="signifyd-logs-value">
                            <div class="col-lgos">
                                <a id="download-log" title="Download Order Logs" type="button"
                                   class="action-primary action-add"  data-ui-id="widget-button-17"
                                   href="<?= $escaper->escapeUrl($block->getUrl(
                                       'signifyd_admin/casedata/logs',
                                       ['order_id' => $block->getOrder()->getId()]
                                   )) ?>">Download Order Logs</a>
                            </div>
                        </td>
                    <?php else: ?>
                        <td class="col-logs" id="signifyd-logs-value">
                            <div class="col-logs">
                                <p>There are no logs to download</p>
                            </div>
                        </td>
                    <?php endif; ?>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</section>
